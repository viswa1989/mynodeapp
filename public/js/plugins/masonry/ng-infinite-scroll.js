var mod;(mod=angular.module("infiniteScroll",[])).value("THROTTLE_MILLISECONDS",500),mod.directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(n,e,t,i){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(l,o,r){var c,u,f,a,m,d,s,S,g,p,v,$,w,D,h,E,T,L;return L=angular.element(e),w=null,D=null,u=null,f=null,p=!0,T=!1,E=null,g=function(n){return n=n[0]||n,isNaN(n.offsetHeight)?n.document.documentElement.clientHeight:n.offsetHeight},v=function(n){if(n[0].getBoundingClientRect&&!n.css("none"))return n[0].getBoundingClientRect().top+$(n)},$=function(n){return n=n[0]||n,isNaN(window.pageYOffset)?n.document.documentElement.scrollTop:n.ownerDocument.defaultView.pageYOffset},S=function(){var e,t,i,r,c;return f===L?(e=g(f)+$(f[0].document.documentElement),i=v(o)+g(o)):(e=g(f),t=0,void 0!==v(f)&&(t=v(f)),i=v(o)-t+g(o)),T&&(i=g((o[0].ownerDocument||o[0].document).documentElement)),r=i-e,c=r<=g(f)*w+1,c?(u=!0,D?l.$$phase||n.$$phase?l.infiniteScroll():l.$apply(l.infiniteScroll):void 0):u=!1},h=function(n,e){var i,l,o;return o=null,l=0,i=function(){return l=(new Date).getTime(),t.cancel(o),o=null,n.call(),null},function(){var r,c;return r=(new Date).getTime(),c=e-(r-l),c<=0?(clearTimeout(o),t.cancel(o),o=null,l=r,n.call()):o?void 0:o=t(i,c,1)}},null!=i&&(S=h(S,i)),l.$on("$destroy",function(){if(f.unbind("scroll",S),null!=E)return E(),E=null}),d=function(n){return w=parseFloat(n)||0},l.$watch("infiniteScrollDistance",d),d(l.infiniteScrollDistance),m=function(n){if((D=!n)&&u)return u=!1,S()},l.$watch("infiniteScrollDisabled",m),m(l.infiniteScrollDisabled),s=function(n){return T=n},l.$watch("infiniteScrollUseDocumentBottom",s),s(l.infiniteScrollUseDocumentBottom),(c=function(n){if(null!=f&&f.unbind("scroll",S),f=n,null!=n)return f.bind("scroll",S)})(L),l.infiniteScrollListenForEvent&&(E=n.$on(l.infiniteScrollListenForEvent,S)),a=function(n){if(null!=n&&0!==n.length){if(n instanceof HTMLElement?n=angular.element(n):"function"==typeof n.append?n=angular.element(n[n.length-1]):"string"==typeof n&&(n=angular.element(document.querySelector(n))),null!=n)return c(n);throw new Exception("invalid infinite-scroll-container attribute.")}},l.$watch("infiniteScrollContainer",a),a(l.infiniteScrollContainer||[]),null!=r.infiniteScrollParent&&c(angular.element(o.parent())),null!=r.infiniteScrollImmediateCheck&&(p=l.$eval(r.infiniteScrollImmediateCheck)),t(function(){if(p)return S()},0,1)}}}]);