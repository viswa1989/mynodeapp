<style type="text/css">
    body{
        overflow: hidden;
    }
    .ui-autocomplete {
        display: block;
        position: absolute !important;
        cursor: default;
        max-height: 300px;
        min-height: 100px;
        max-width: 270px;
        overflow-y: auto;
        overflow-x: hidden;
        padding-right: 0;
        z-index: 9999;
        background: #fff;
        float: left;
        min-width: 160px;
        padding: 5px 0px;
        margin: 2px 0px 0px;
        font-size: 14px;
        text-align: left;
        list-style: none;
        background-color: rgb(255, 255, 255);
        -webkit-background-clip: padding-box;
        background-clip: padding-box;
        border: 1px solid rgba(0, 0, 0, 0.14902);
    }
    .ui-autocomplete>li>a {
        display: block;
        padding: 3px 10px;
        clear: both;
        font-weight: 400;
        line-height: 1.42857143;
        color: #333;
        white-space: nowrap;
    }
    .daterangepicker {
        position: absolute;
        background: #fff;
        top: 100px;
        left: 20px;
        padding: 4px;
        margin-top: 1px;
        border-radius: 4px;
    }
    .daterangepicker.opensleft:before {
        position: absolute;
        top: -7px;
        right: 9px;
        display: inline-block;
        border-right: 7px solid transparent;
        border-bottom: 7px solid #ccc;
        border-left: 7px solid transparent;
        border-bottom-color: rgba(0, 0, 0, 0.2);
        content: '';
    }
    .daterangepicker.opensleft:after {
        position: absolute;
        top: -6px;
        right: 10px;
        display: inline-block;
        border-right: 6px solid transparent;
        border-bottom: 6px solid #fff;
        border-left: 6px solid transparent;
        content: '';
    }
    .daterangepicker.openscenter:before {
        position: absolute;
        top: -7px;
        left: 0;
        right: 0;
        width: 0;
        margin-left: auto;
        margin-right: auto;
        display: inline-block;
        border-right: 7px solid transparent;
        border-bottom: 7px solid #ccc;
        border-left: 7px solid transparent;
        border-bottom-color: rgba(0, 0, 0, 0.2);
        content: '';
    }
    .daterangepicker.openscenter:after {
        position: absolute;
        top: -6px;
        left: 0;
        right: 0;
        width: 0;
        margin-left: auto;
        margin-right: auto;
        display: inline-block;
        border-right: 6px solid transparent;
        border-bottom: 6px solid #fff;
        border-left: 6px solid transparent;
        content: '';
    }
    .daterangepicker.opensright:before {
        position: absolute;
        top: -7px;
        left: 9px;
        display: inline-block;
        border-right: 7px solid transparent;
        border-bottom: 7px solid #ccc;
        border-left: 7px solid transparent;
        border-bottom-color: rgba(0, 0, 0, 0.2);
        content: '';
    }
    .daterangepicker.opensright:after {
        position: absolute;
        top: -6px;
        left: 10px;
        display: inline-block;
        border-right: 6px solid transparent;
        border-bottom: 6px solid #fff;
        border-left: 6px solid transparent;
        content: '';
    }
    .daterangepicker.dropup{
        margin-top: -5px;
    }
    .daterangepicker.dropup:before{
        top: initial;
        bottom:-7px;
        border-bottom: initial;
        border-top: 7px solid #ccc;
    }
    .daterangepicker.dropup:after{
        top: initial;
        bottom:-6px;
        border-bottom: initial;
        border-top: 6px solid #fff;
    }
    .daterangepicker.dropdown-menu {
        max-width: none;
        z-index: 3000;
        width: auto;
    }
    .daterangepicker_input {
        display: none !important;
    }
    .daterangepicker .ranges, .daterangepicker .calendar {
        float: left;
    }
    .daterangepicker.single .ranges, .daterangepicker.single .calendar {
        float: none;
    }
    .daterangepicker .ranges {
        margin: 4px;
        text-align: left;
    }
    .daterangepicker .calendar {
        display: none;
        max-width: 270px;
    }
    .daterangepicker.show-calendar .calendar {
        display: block;
    }
    .daterangepicker .calendar.single .calendar-table {
        border: none;
    }

    /* Calendars */
    .daterangepicker .calendar th, .daterangepicker .calendar td {
        white-space: nowrap;
        text-align: center;
        min-width: 32px;
    }
    .daterangepicker .calendar-table {
        border: 1px solid #ddd;
        padding: 4px;
        border-radius: 4px;
        background: #fff;
    }
    .daterangepicker .calendar.left .calendar-table {
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
    }
    .daterangepicker .calendar.right .calendar-table {
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;  
    }
    .daterangepicker .calendar.left {
        margin: 4px 0 4px 4px;
    }
    .daterangepicker .calendar.right {
        margin: 4px 4px 4px 0;
    }
    .daterangepicker .calendar.left .calendar-table {
        padding-right: 12px;
    }
    .daterangepicker table {
        width: 100%;
        margin: 0;
    }
    .daterangepicker td, .daterangepicker th {
        text-align: center;
        width: 20px;
        height: 20px;
        border-radius: 4px;
        white-space: nowrap;
        cursor: pointer;
    }
    .daterangepicker td.off, .daterangepicker td.off.in-range, .daterangepicker td.off.start-date, .daterangepicker td.off.end-date {
        color: #999;
        background: #fff;
    }
    .daterangepicker td.disabled, .daterangepicker option.disabled {
        color: #999;
    }
    .daterangepicker td.available:hover, .daterangepicker th.available:hover {
        background: #eee;
    }
    .daterangepicker td.in-range {
        background: #ebf4f8;
        border-radius: 0;
    }
    .daterangepicker td.start-date {
        border-radius: 4px 0 0 4px;
    }
    .daterangepicker td.end-date {
        border-radius: 0 4px 4px 0;
    }
    .daterangepicker td.start-date.end-date {
        border-radius: 4px;
    }
    .daterangepicker td.active, .daterangepicker td.active:hover {
        background-color: #357ebd;
        border-color: #3071a9;
        color: #fff;
    }
    .daterangepicker td.week, .daterangepicker th.week {
        font-size: 80%;
        color: #ccc;
    }
    .daterangepicker select.monthselect, .daterangepicker select.yearselect {
        font-size: 12px;
        padding: 1px;
        height: auto;
        margin: 0;
        cursor: default;
    }
    .daterangepicker select.monthselect {
        margin-right: 2%;
        width: 56%;
    }
    .daterangepicker select.yearselect {
        width: 40%;
    }
    .daterangepicker select.hourselect, .daterangepicker select.minuteselect, .daterangepicker select.secondselect, .daterangepicker select.ampmselect {
        width: 50px;
        margin-bottom: 0;
    }
    .daterangepicker th.month {
        width: auto;
    }

    /* Text Input Above Each Calendar */
    .daterangepicker .input-mini {
        border: 1px solid #ccc;
        border-radius: 4px;
        color: #555;
        display: block;
        height: 30px;
        line-height: 30px;
        vertical-align: middle;
        margin: 0 0 5px 0;
        padding: 0 6px 0 28px;
        width: 100%;
    }
    .daterangepicker .input-mini.active {
        border: 1px solid #357ebd;
    }
    .daterangepicker .daterangepicker_input i {
        position: absolute;
        left: 8px;
        top: 8px;
    }
    .daterangepicker .left .daterangepicker_input {
        padding-right: 12px;
    }
    .daterangepicker .daterangepicker_input {
        position: relative;
    }

    /* Time Picker */
    .daterangepicker .calendar-time {
        text-align: center;
        margin: 5px auto;
        line-height: 30px;
        position: relative;
        padding-left: 28px;
    }
    .daterangepicker .calendar-time select.disabled {
        color: #ccc;
        cursor: not-allowed;
    }

    /* Predefined Ranges */
    .daterangepicker .ranges {
        font-size: 11px;
    }
    .daterangepicker .ranges ul {
        list-style: none;
        margin: 0;
        padding: 0;
        width: 160px;
    }
    .daterangepicker .ranges li {
        font-size: 13px;
        background: #f5f5f5;
        border: 1px solid #f5f5f5;
        color: #08c;
        padding: 3px 12px;
        margin-bottom: 8px;
        border-radius: 5px;
        cursor: pointer;
    }
    .daterangepicker .ranges li.active, .daterangepicker .ranges li:hover {
        background: #08c;
        border: 1px solid #08c;
        color: #fff;
    }
</style>
<div class="row margin-0" ng-if="PoData.pageaction == 'View'">
    <div class="purchase_right_section_header">Utilized Stock for <b ng-if="PoData.selectedDivisionname == 'ALL'">Lotus Knits</b><b ng-if="PoData.selectedDivisionname != 'ALL'" ng-bind="PoData.selectedDivisionname"></b>.
        <div class="fullscreen_icon pull-right margin-right-10 c_full_screen_click" id="full_screen" onclick="return full_screen_purchasestock()"></div>

        <div class="mail_icons pull-right margin-right-10" ng-click="clientdata.showdialogDiv = !clientdata.showdialogDiv"></div>

        <div class="pdf_icons pull-right margin-right-10" ng-click="pdf_reporter()"></div>

        <div class="print_icons pull-right margin-right-10" ng-click="printThisPayments();"></div>
    </div>
    <div class="purchase_container" style="overflow: hidden;">
        <div class="purchase_view_container" style="overflow: hidden;">
            <div class="purchase_fixed_postion dtrange_fixed_postion">
                <div class="purchase_date_select">
                    <div class="purchase_date_left_sec">
                        <div class="custom_date_style">
                            <div class="input-append">
                                <input class="form-control add-on purchase_date_input rangeDate" name="daterange" type="text" />
                                <span class="add-on date_icon rangeDate"></span>
                            </div>
                        </div>
                    </div>
                    <div class="purchase_date_right_sec">
                        <span ng-class="{'active':PoData.activeDay == 'TODAY'}" ng-click="filterUtilizedstock('TODAY');">Today</span>,
                        <span ng-class="{'active':PoData.activeDay == 'YDAY'}" ng-click="filterUtilizedstock('YDAY');">Yesterday</span>,
                        <span ng-class="{'active':PoData.activeDay == '7DAY'}" ng-click="filterUtilizedstock('7DAY');">Last 7 Days</span>,  
                        <span ng-class="{'active':PoData.activeDay == 'THIS_MONTH'}" ng-click="filterUtilizedstock('THIS_MONTH');">This Month</span>, 
                        <span ng-class="{'active':PoData.activeDay == 'LAST_MONTH'}" ng-click="filterUtilizedstock('LAST_MONTH');">LastMonth</span>
                    </div>
                </div>
                <div class="report_date_show"></div>
            </div>
            <div class="col-xs-12 padding_10 purchaseheaderresult">
                <div class="heading_5 margin-bottom-15 margin-top-20">
                    <b style="font-size: 15px;" ng-if="PoData.selectedDivisionname != 'ALL'" ng-bind="'At '+(PoData.selectedDivisionname)+' as of '+(PoData.FromDate | date:'dd - MM - yyyy')"></b>
                    <b style="font-size: 15px;" ng-if="PoData.selectedDivisionname != 'ALL'" ng-bind="' to '+(PoData.ToDate | date:'dd - MM - yyyy')"></b>
                </div>
            </div>
            <div class="col-xs-12 padding_10 purchasesearchcnt">
                <div class="heading_5 margin-bottom-15">
                    <b class="pull-left margin-top-10" style="font-size: 15px;">{{PoData.utilizedStock.length}} Utilized Stock</b>

                    <div class="right_menu" style="margin-top: 0px;float:right; width:330px;">
                        <div class="search_right_cnt" style="width:100% !important;">
                            <input type="text" class="search_box_expand" placeholder="Search for Utilized stock" ng-model="utilizedstockfilters">
                            <div class="search_icons">
                                <span class="search_letter">Search</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xs-12 padding_10 margin-top-15 purchase_view_table">
                <div class="table_scroll">
                    <table class="mt_table tb_scroll_style res-table-scroll margin-bottom-10">
                        <thead>
                            <tr>
                                <th style="min-width:150px;">Division</th>
                                <th style="min-width: 180px;">Category</th>
                                <th style="min-width: 180px;">Item</th>
                                <th class="text-center" style="min-width: 120px;">Available stock</th>
                                <th class="text-center" style="min-width: 120px;">Used Stock</th>
                                <th class="text-center" style="min-width: 150px;">Used By</th>
                                <th style="min-width:40px;"></th>
                            </tr>
                        </thead>
                        <tbody class="scollbody">
                            <tr ng-repeat="stock in PoData.utilizedStock | filter:utilizedstockfilters" class="tr_body" ng-class="{'current_active_row':PoData.currentRow == poret._id}" ng-dblclick="editUtilizedstock(stock)">
                                <td style="min-width:150px;">
                                    <span ng-bind="PoData.selectedDivisionname"></span>
                                </td>
                                <td  style="min-width: 180px;">
                                    <span ng-if="stock._id || PoData.editRow != $index" ng-bind="stock.category_id.name"></span>
                        <ui-select ng-if="!stock._id && PoData.editRow == $index" ng-model="stock.category_id" theme="selectize" search-enabled='true' name="category_id" on-select="setCategory(stock)">
                            <ui-select-match placeholder="Select Category">{{$select.selected.name}}</ui-select-match>
                            <ui-select-choices repeat="category as category in PoData.categorylist | filter: $select.search">
                                <div ng-bind-html="category.name | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                        </td>
                        <td style="min-width: 180px;">
                        <ui-select ng-if="!stock._id && PoData.editRow == $index" ng-model="stock.product_id" theme="selectize" search-enabled='true' name="product_id" on-select="setProduct(stock)">
                            <ui-select-match placeholder="Select Product">{{$select.selected.product_name}}</ui-select-match>
                            <ui-select-choices repeat="product as product in PoData.productlist | filter: $select.search">
                                <div ng-bind-html="product.product_name | highlight: $select.search"></div>
                            </ui-select-choices>
                            <ui-select-no-choice>
                                No items found
                            </ui-select-no-choice>
                        </ui-select>
                        <span ng-if="stock._id || PoData.editRow != $index" ng-bind="stock.product_id.product_name"></span>
                        </td>
                        <td class="text-center" style="min-width: 120px;">
                            <span ng-bind="stock.availableStock"></span>
                        </td>
                        <td class="text-center" style="min-width: 120px;">
                            <input type="text" ng-if="PoData.editRow == $index" ng-model="stock.quantity" class="common_input" placeholder="Qty" valid-numeral>
                            <span ng-if="PoData.editRow != $index" ng-bind="stock.quantity"></span>
                        </td>
                        <td class="text-center" style="min-width: 120px;">
                            <input type="text" ng-if="PoData.editRow == $index" ng-model="stock.usedBy" class="common_input" placeholder="Used by">
                            <span ng-if="PoData.editRow != $index" ng-bind="stock.usedBy"></span>
                        </td>
                        <td style="min-width:40px;">
                            <span class="enable_large_green" ng-if="PoData.editRow == $index" ng-click="saveUtilizedstock(stock)"></span>
                            <span class="delete_small" noty-remove noty-update='deleteUtilizedstock(stock)' noty-style="3" 
                                  noty-content="Are you sure,You want to delete this utilized stock item?"></span>
                        </td>
                        </tr>
                        <tr>
                            <td colspan="12">
                                <button class="common_button" ng-click="addNewutilizedstock()">Add New</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        setTimeout(function(){
            purchasestockresize();
        },200);
    });

     var $table = $('table.mt_table'),
        $bodyCells = $table.find('tbody tr:first').children(),
        colWidth;
    
    function pendingpayreport() {
        colWidth = $bodyCells.map(function () {
        return $(this).width();
        }).get();
        $table.find('thead tr').children().each(function (i, v) {
        $(v).width(colWidth[i]);
        });
        var header_height_c1 = $('.header').height();
        var windowHeight_c1 = $(window).height();
        var total_height_c1 = windowHeight_c1 - header_height_c1 - 380;
        $('.scollbody').css('height', total_height_c1);
    }
    $(window).resize(function () {
        pendingpayreport();
    });   
    setTimeout(function () {
        pendingpayreport();
    }, 200);
</script>