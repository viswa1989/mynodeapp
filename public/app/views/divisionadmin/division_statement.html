<style type="text/css">
    body{
        overflow: hidden;
    }
    .daterangepicker {
        position: absolute;
        background: #fff;
        top: 100px;
        left: 20px;
        padding: 4px;
        margin-top: 1px;
        border-radius: 4px;
    }
    .daterangepicker.opensleft:before {
        position: absolute;
        top: -7px;
        right: 9px;
        display: inline-block;
        border-right: 7px solid transparent;
        border-bottom: 7px solid #ccc;
        border-left: 7px solid transparent;
        border-bottom-color: rgba(0, 0, 0, 0.2);
        content: '';
    }
    .daterangepicker.opensleft:after {
        position: absolute;
        top: -6px;
        right: 10px;
        display: inline-block;
        border-right: 6px solid transparent;
        border-bottom: 6px solid #fff;
        border-left: 6px solid transparent;
        content: '';
    }
    .daterangepicker.openscenter:before {
        position: absolute;
        top: -7px;
        left: 0;
        right: 0;
        width: 0;
        margin-left: auto;
        margin-right: auto;
        display: inline-block;
        border-right: 7px solid transparent;
        border-bottom: 7px solid #ccc;
        border-left: 7px solid transparent;
        border-bottom-color: rgba(0, 0, 0, 0.2);
        content: '';
    }
    .daterangepicker.openscenter:after {
        position: absolute;
        top: -6px;
        left: 0;
        right: 0;
        width: 0;
        margin-left: auto;
        margin-right: auto;
        display: inline-block;
        border-right: 6px solid transparent;
        border-bottom: 6px solid #fff;
        border-left: 6px solid transparent;
        content: '';
    }
    .daterangepicker.opensright:before {
        position: absolute;
        top: -7px;
        left: 9px;
        display: inline-block;
        border-right: 7px solid transparent;
        border-bottom: 7px solid #ccc;
        border-left: 7px solid transparent;
        border-bottom-color: rgba(0, 0, 0, 0.2);
        content: '';
    }
    .daterangepicker.opensright:after {
        position: absolute;
        top: -6px;
        left: 10px;
        display: inline-block;
        border-right: 6px solid transparent;
        border-bottom: 6px solid #fff;
        border-left: 6px solid transparent;
        content: '';
    }
    .daterangepicker.dropup{
        margin-top: -5px;
    }
    .daterangepicker.dropup:before{
        top: initial;
        bottom:-7px;
        border-bottom: initial;
        border-top: 7px solid #ccc;
    }
    .daterangepicker.dropup:after{
        top: initial;
        bottom:-6px;
        border-bottom: initial;
        border-top: 6px solid #fff;
    }
    .daterangepicker.dropdown-menu {
        max-width: none;
        z-index: 3000;
        width: auto;
    }
    .daterangepicker_input {
        display: none !important;
    }
    .daterangepicker .ranges, .daterangepicker .calendar {
        float: left;
    }
    .daterangepicker.single .ranges, .daterangepicker.single .calendar {
        float: none;
    }
    .daterangepicker .ranges {
        margin: 4px;
        text-align: left;
    }
    .daterangepicker .calendar {
        display: none;
        max-width: 270px;
    }
    .daterangepicker.show-calendar .calendar {
        display: block;
    }
    .daterangepicker .calendar.single .calendar-table {
        border: none;
    }

    /* Calendars */
    .daterangepicker .calendar th, .daterangepicker .calendar td {
        white-space: nowrap;
        text-align: center;
        min-width: 32px;
    }
    .daterangepicker .calendar-table {
        border: 1px solid #ddd;
        padding: 4px;
        border-radius: 4px;
        background: #fff;
    }
    .daterangepicker .calendar.left .calendar-table {
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
    }
    .daterangepicker .calendar.right .calendar-table {
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;  
    }
    .daterangepicker .calendar.left {
        margin: 4px 0 4px 4px;
    }
    .daterangepicker .calendar.right {
        margin: 4px 4px 4px 0;
    }
    .daterangepicker .calendar.left .calendar-table {
        padding-right: 12px;
    }
    .daterangepicker table {
        width: 100%;
        margin: 0;
    }
    .daterangepicker td, .daterangepicker th {
        text-align: center;
        width: 20px;
        height: 20px;
        border-radius: 4px;
        white-space: nowrap;
        cursor: pointer;
    }
    .daterangepicker td.off, .daterangepicker td.off.in-range, .daterangepicker td.off.start-date, .daterangepicker td.off.end-date {
        color: #999;
        background: #fff;
    }
    .daterangepicker td.disabled, .daterangepicker option.disabled {
        color: #999;
    }
    .daterangepicker td.available:hover, .daterangepicker th.available:hover {
        background: #eee;
    }
    .daterangepicker td.in-range {
        background: #ebf4f8;
        border-radius: 0;
    }
    .daterangepicker td.start-date {
        border-radius: 4px 0 0 4px;
    }
    .daterangepicker td.end-date {
        border-radius: 0 4px 4px 0;
    }
    .daterangepicker td.start-date.end-date {
        border-radius: 4px;
    }
    .daterangepicker td.active, .daterangepicker td.active:hover {
        background-color: #357ebd;
        border-color: #3071a9;
        color: #fff;
    }
    .daterangepicker td.week, .daterangepicker th.week {
        font-size: 80%;
        color: #ccc;
    }
    .daterangepicker select.monthselect, .daterangepicker select.yearselect {
        font-size: 12px;
        padding: 1px;
        height: auto;
        margin: 0;
        cursor: default;
    }
    .daterangepicker select.monthselect {
        margin-right: 2%;
        width: 56%;
    }
    .daterangepicker select.yearselect {
        width: 40%;
    }
    .daterangepicker select.hourselect, .daterangepicker select.minuteselect, .daterangepicker select.secondselect, .daterangepicker select.ampmselect {
        width: 50px;
        margin-bottom: 0;
    }
    .daterangepicker th.month {
        width: auto;
    }

    /* Text Input Above Each Calendar */
    .daterangepicker .input-mini {
        border: 1px solid #ccc;
        border-radius: 4px;
        color: #555;
        display: block;
        height: 30px;
        line-height: 30px;
        vertical-align: middle;
        margin: 0 0 5px 0;
        padding: 0 6px 0 28px;
        width: 100%;
    }
    .daterangepicker .input-mini.active {
        border: 1px solid #357ebd;
    }
    .daterangepicker .daterangepicker_input i {
        position: absolute;
        left: 8px;
        top: 8px;
    }
    .daterangepicker .left .daterangepicker_input {
        padding-right: 12px;
    }
    .daterangepicker .daterangepicker_input {
        position: relative;
    }

    /* Time Picker */
    .daterangepicker .calendar-time {
        text-align: center;
        margin: 5px auto;
        line-height: 30px;
        position: relative;
        padding-left: 28px;
    }
    .daterangepicker .calendar-time select.disabled {
        color: #ccc;
        cursor: not-allowed;
    }

    /* Predefined Ranges */
    .daterangepicker .ranges {
        font-size: 11px;
    }
    .daterangepicker .ranges ul {
        list-style: none;
        margin: 0;
        padding: 0;
        width: 160px;
    }
    .daterangepicker .ranges li {
        font-size: 13px;
        background: #f5f5f5;
        border: 1px solid #f5f5f5;
        color: #08c;
        padding: 3px 12px;
        margin-bottom: 8px;
        border-radius: 5px;
        cursor: pointer;
    }
    .daterangepicker .ranges li.active, .daterangepicker .ranges li:hover {
        background: #08c;
        border: 1px solid #08c;
        color: #fff;
    }
</style>
<div class="stock_stms c_stock_stms_cnt jobcardreport" ng-controller="DivisionstatementController">
    <div class="report_left_section bg_white">
        <div class="report_filter_header">
            <div class="heading_3">Division Statement</div>
        </div>
        <div class="report_filter_cnt report_left_menu">
            <div class="overflow_scroll margin-top-05">
                <div class="filter_cnt">
                    <div class="filter filter_click store" id="store">
                        <a class="button repofilterbtn" ng-repeat="division in DivisionreportData.divisionList" ng-class="{'active':DivisionreportData.selectedDivisionid == division._id}" 
                           ng-click="filterBydivision(division);" ng-bind="division.name"></a>
                    </div>
                </div>                
            </div>
        </div>
    </div>

    <div class="report_right_section" id="exportthis">
        <div class="report_responsive_cnt">
            <div class="report_right_section_header">Statements for <b ng-if="DivisionreportData.selectedDivisionname == 'ALL'">ALL</b>
                <b ng-if="DivisionreportData.selectedDivisionname != 'ALL'" ng-bind="DivisionreportData.selectedDivisionname"></b>.

                <div class="fullscreen_icon pull-right margin-right-10 c_full_screen_click" id="full_screen" onclick="return full_screen_pendingpayment()"></div>

                <div class="mail_icons pull-right margin-right-10" ng-click="clientdata.showdialogDiv = !clientdata.showdialogDiv"></div>

                <div class="excel_icons pull-right margin-right-10" ng-click="exportThisReport();"></div>

                <div class="print_icons pull-right margin-right-10" ng-click="printThisReport();"></div>
            </div>

            <div class="report_container">
                <div class="report_set_container">
                    <div class="purchase_fixed_postion dtrange_fixed_postion">
                        <div class="purchase_date_select">
                            <div class="purchase_date_left_sec">
                                <div class="custom_date_style">
                                    <div class="input-append">
                                        <input class="form-control add-on purchase_date_input rangeDate" name="daterange" type="text" />
                                        <span class="add-on date_icon rangeDate"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="purchase_date_right_sec">
                                <span ng-class="{'active':DivisionreportData.activeDay == 'TODAY'}" ng-click="filterOrderstatement('TODAY');">Today</span>,
                                <span ng-class="{'active':DivisionreportData.activeDay == 'YDAY'}" ng-click="filterOrderstatement('YDAY');">Yesterday</span>,
                                <span ng-class="{'active':DivisionreportData.activeDay == '7DAY'}" ng-click="filterOrderstatement('7DAY');">Last 7 Days</span>,  
                                <span ng-class="{'active':DivisionreportData.activeDay == 'THIS_MONTH'}" ng-click="filterOrderstatement('THIS_MONTH');">This Month</span>, 
                                <span ng-class="{'active':DivisionreportData.activeDay == 'LAST_MONTH'}" ng-click="filterOrderstatement('LAST_MONTH');">LastMonth</span>
                            </div>
                        </div>
                        <div class="report_date_show"></div>
                    </div>
                    <div class="clearboth"></div>
                    
                    <div class="col-xs-12 divi_container" id="c_report_scroll" scroll-to-top="statmenttable">
                        <div class="heading_5 col-xs-12 reportsearch margin-top-30 margin-bottom-15">
                            <b class="pull-left margin-top-10" style="font-size: 15px;" ng-if="(DivisionreportData.FromDate | date:dateformats.short_date) == (DivisionreportData.ToDate | date:dateformats.short_date)" 
                               ng-bind-html="'Account Statement for '+DivisionreportData.FromDate | date:dateformats.short_date"></b>
                            <b class="pull-left margin-top-10" style="font-size: 15px;" ng-if="(DivisionreportData.FromDate | date:dateformats.short_date) != (DivisionreportData.ToDate | date:dateformats.short_date)" 
                               ng-bind-html="'Account Statement from '+(DivisionreportData.FromDate | date:dateformats.short_date)+' to '+(DivisionreportData.ToDate | date:dateformats.short_date)"></b>
                            <div class="print_icons pull-left margin-right-10 margin-top-10" ng-click="printThisReport();"></div>
                            <div class="excel_icons pull-left margin-right-10 margin-top-10" ng-click="exportThisReport();"></div>
                        </div>

                        <div class="col-xs-12 reporttablez margin-top-15">
                            <table class="table div_report_table">
                                <thead>
                                    <tr class="tr_header">
                                        <th style="width: 90px;">Cheque no</th>
                                        <th style="width: 30px;">Day</th>
                                        <th style="width: 140px;">Date</th>
                                        <th>Payee</th>
                                        <th class="text-right">Amount ₹</th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="ledger in DivisionreportData.ledgerTrans">
                                    <tr>
                                        <th colspan="3"></th>
                                        <th align="center font-normal" ng-bind="ledger.name+' Ledger'"></th>
                                    </tr>
                                    <tr>
                                        <td colspan="3"></td>
                                        <td><b>Opening Balance</b></td>
                                        <td class="text-right" ng-bind="DivisionreportData.currency+(ledger.opening_balance | number:2)"></td>
                                    </tr>
                                    <tr class="tr_hover" ng-if="ledger.transaction && ledger.transaction.length>0" ng-repeat="trans in ledger.transaction">
                                        <td ng-bind="trans.cheque_no"></td>
                                        <td ng-bind="trans.transaction_date| date:'EEE'"></td>
                                        <td ng-bind="trans.transaction_date| date:'EEE MMM dd, yyyy'"></td>
                                        <td>
                                            <span ng-if="trans.type != 'TRANSFER'" ng-bind="trans.payee_name+', '"></span>
                                            <span ng-if="trans.type == 'TRANSFER' || !trans.payee_name" ng-bind="trans.memo"></span>
                                            <span ng-bind="trans.category_name+', '"></span>
                                            <span ng-if="trans.bills && trans.bills.length>0">
                                                ,<span ng-repeat="bill in trans.bills">
                                                    <span ng-bind="bill.bill_no+', '"></span>
                                                    <span ng-if="$index != trans.bills.length-1" ng-bind="', '"></span>
                                                </span>
                                            </span>
                                        </td>
                                        <td class="text-right" ng-bind="DivisionreportData.currency+(trans.transaction_amount | number:2)"></td>
                                    </tr>
                                    <tr style="text-align: center;" ng-if="!ledger.transaction || ledger.transaction.length==0">
                                        <td colspan="5">-No transactions happened-</td>
                                    </tr>
                                    <tr>
                                        <td colspan="5">
                                            <div class="text-right heading_7 margin-bottom-10"> [
                                                <b>Total Received:</b>
                                                <span><b ng-bind="DivisionreportData.currency+(ledger.total_received | number:2)"></b></span> &nbsp;&nbsp;
                                                <b>Total Spent:</b>
                                                <span><b ng-bind="DivisionreportData.currency+(ledger.total_spend | number:2)"></b></span> &nbsp;&nbsp;
                                                <b>Ending Balance:</b>
                                                <span><b ng-bind="DivisionreportData.currency+(ledger.balance | number:2)"></b></span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>

    <!--                            <tbody>
                                    <tr>
                                        <th colspan="3"></th>
                                        <th align="center font-normal">FACTORY CASH RECEIVABLES Ledger</th>
                                    </tr>
                                    <tr>
                                        <td colspan="3"></td>
                                        <td><b>Opening Balance</b></td>
                                        <td class="text-right">₹ 1,58,270.00</td>
                                    </tr>
                                    <tr style="text-align: center;">
                                        <td colspan="5">-No transactions happened-</td>
                                    </tr>
                                    <tr>
                                        <td colspan="5">
                                            <div class="text-right heading_7 margin-bottom-10"> [
                                                <b>Total Received:</b>
                                                <span><b>₹ 0.00</b></span> &nbsp;&nbsp;
                                                <b>Total Spent:</b>
                                                <span><b>₹ 0.00</b></span> &nbsp;&nbsp;
                                                <b>Ending Balance:</b>
                                                <span><b>₹ 1,58,270.00</b></span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>

                                <tbody>
                                    <tr>
                                        <th colspan="3"></th>
                                        <th align="center font-normal">FACTORY CASH RECEIVABLES Ledger</th>
                                    </tr>
                                    <tr>
                                        <td colspan="3"></td>
                                        <td><b>Opening Balance</b></td>
                                        <td class="text-right">₹ 1,58,270.00</td>
                                    </tr>
                                    <tr style="text-align: center;">
                                        <td colspan="5">-No transactions happened-</td>
                                    </tr>
                                    <tr>
                                        <td colspan="5">
                                            <div class="text-right heading_7 margin-bottom-10"> [
                                                <b>Total Received:</b>
                                                <span><b>₹ 0.00</b></span> &nbsp;&nbsp;
                                                <b>Total Spent:</b>
                                                <span><b>₹ 0.00</b></span> &nbsp;&nbsp;
                                                <b>Ending Balance:</b>
                                                <span><b>₹ 1,58,270.00</b></span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>-->

                                <tfoot>
                                    <tr class="footer_total_inout">
                                        <td colspan="3"></td>
                                        <td colspan="2">
                                            <div class="text-right heading_7 margin-top-10">
                                                <b>Net Ending Balance:</b>&nbsp;
                                                <b ng-bind="DivisionreportData.ledgerTrans | sumByKey:'balance' | number:2"></b>
                                                <!--<b class="red_text">-(₹ 1,90,33,097.82)</b>-->
                                            </div>
                                        </td>
                                    </tr>
                                </tfoot>
                            </table>                        
                        </div>                        
                                               
                        <div class="col-xs-12 reporttablez padding_zero">
                            <div class="font_15 col-xs-12 reportsearch margin-bottom-15">
                                <b class="pull-left margin-top-10" style="font-size: 15px;" ng-if="(DivisionreportData.FromDate | date:dateformats.short_date) == (DivisionreportData.ToDate | date:dateformats.short_date)" 
                                    ng-bind-html="'Invoices for '+DivisionreportData.FromDate | date:dateformats.short_date"></b>
                                <b class="pull-left margin-top-10" style="font-size: 15px;" ng-if="(DivisionreportData.FromDate | date:dateformats.short_date) != (DivisionreportData.ToDate | date:dateformats.short_date)" 
                                   ng-bind-html="'Invoices from '+(DivisionreportData.FromDate | date:dateformats.short_date)+' to '+(DivisionreportData.ToDate | date:dateformats.short_date)"></b>
                                <div class="print_icons pull-left margin-right-10 margin-top-10" ng-click="printThisReport();"></div>
                                <div class="excel_icons pull-left margin-right-10 margin-top-10" ng-click="exportThisReport();"></div>
                            </div>
                            
                            <div class="col-xs-12 report_table report_table_div">
                                <table class="table font_12">
                                    <thead>
                                        <tr class="tr_header">
                                            <th style="width: 90px;">Invoice No</th>
                                            <th style="width: 30px;">Day</th>
                                            <th style="width: 140px;">Date</th>
                                            <th>Payee</th>
                                            <th class="text-right">Amount ₹</th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                        <tr ng-if="!DivisionreportData.InvoiceTrans || DivisionreportData.InvoiceTrans.transaction.length == 0" class="footer_total_value">
                                            <td colspan="3"></td>
                                            <td class="no_trans_happen" style="text-align: left;">-No invoices found.-</td>
                                        </tr>
                                        <tr class="tr_hover" ng-if="DivisionreportData.InvoiceTrans.transaction && DivisionreportData.InvoiceTrans.transaction.length>0" 
                                            ng-repeat="trans in DivisionreportData.InvoiceTrans.transaction">
                                            <td ng-bind="trans.invoice_no"></td>
                                            <td ng-bind="trans.invoice_date| date:'EEE'"></td>
                                            <td ng-bind="trans.invoice_date| date:'EEE MMM dd, yyyy'"></td>
                                            <td>
                                                <span ng-bind="trans.customer_name"></span>
                                            </td>
                                            <td class="text-right" ng-bind="DivisionreportData.currency+(trans.total | number:2)"></td>
                                        </tr>
                                        <tr class="footer_total_value">
                                            <td colspan="3"></td>
                                            <td></td>
                                            <td>
                                                <div class="text-right heading_7 report_total_val">
                                                    <b>Total:</b>&nbsp;&nbsp;
                                                    <span class="report_table_total_rs">
                                                        <b ng-bind="DivisionreportData.currency+(DivisionreportData.InvoiceTrans.total_received | number:2)"></b>
                                                    </span>
                                                </div>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                                           
                        <div class="scroll-top scroll-top-display" scroll-to-id="statmenttable">
                            <a href="#" class="scroll-top-display"></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>    
    var $table = $('table.mt_table'),
            $bodyCells = $table.find('tbody tr:first').children(),
            colWidth;
    
    function pendingpayreport() {
        colWidth = $bodyCells.map(function () {
        return $(this).width();
        }).get();
        $table.find('thead tr').children().each(function (i, v) {
        $(v).width(colWidth[i]);
        });
        var header_height_c1 = $('.header').height(); //window height
        var windowHeight_c1 = $(window).height();
        var total_height_c1 = windowHeight_c1 - header_height_c1 - 75;
        var r1 = $('.report_date_select').height() + 20;
        var r2 = $('.reportheader').height() + 50;
        var r3 = $('.reportsearch').height() + 25;
        var r4 = $(".reporttablez .mt_table thead").height() + 45;
        var totalr1 = r1 + r2 + r3 + r4;
        $('.report_right_section .overflow_scroll').css('height', total_height_c1);
        
        var v1 = $('.report_right_section_header').height();
        var v2 = $('.purchase_fixed_postion').height();
        $('#c_report_scroll').css('height', total_height_c1 - v1 - v2);
        
        if (parseInt($(window).width()) <= 840) {
            if (!$('.report_right_section').hasClass('full_width_acc')) {
                totalr1 += 420;
            }
            $('.scollbody').css('height', total_height_c1 - totalr1);
        } else {
            $('.scollbody').css('height', total_height_c1 - totalr1);
        }
    }
    
    // Adjust the width of thead cells when window resizes
    $(window).resize(function () {
        pendingpayreport();
        if($(window).width() <= 840){
            reportsFullviewshow();
        }
    });
    
    if($(window).width() <= 840){
        reportsFullviewshow();
    }
    
    function full_screen_pendingpayment() {
        $('.report_left_section').toggle();
        $('.report_right_section').toggleClass('full_width_acc');
        pendingpayreport();
    }
    
    setTimeout(function () {
        pendingpayreport();
    }, 200);      
</script>