<style type="text/css">
    body{
        overflow: hidden;
    }
    .daterangepicker {
        position: absolute;
        background: #fff;
        top: 100px;
        left: 20px;
        padding: 4px;
        margin-top: 1px;
        border-radius: 4px;
    }
    .daterangepicker.opensleft:before {
        position: absolute;
        top: -7px;
        right: 9px;
        display: inline-block;
        border-right: 7px solid transparent;
        border-bottom: 7px solid #ccc;
        border-left: 7px solid transparent;
        border-bottom-color: rgba(0, 0, 0, 0.2);
        content: '';
    }
    .daterangepicker.opensleft:after {
        position: absolute;
        top: -6px;
        right: 10px;
        display: inline-block;
        border-right: 6px solid transparent;
        border-bottom: 6px solid #fff;
        border-left: 6px solid transparent;
        content: '';
    }
    .daterangepicker.openscenter:before {
        position: absolute;
        top: -7px;
        left: 0;
        right: 0;
        width: 0;
        margin-left: auto;
        margin-right: auto;
        display: inline-block;
        border-right: 7px solid transparent;
        border-bottom: 7px solid #ccc;
        border-left: 7px solid transparent;
        border-bottom-color: rgba(0, 0, 0, 0.2);
        content: '';
    }
    .daterangepicker.openscenter:after {
        position: absolute;
        top: -6px;
        left: 0;
        right: 0;
        width: 0;
        margin-left: auto;
        margin-right: auto;
        display: inline-block;
        border-right: 6px solid transparent;
        border-bottom: 6px solid #fff;
        border-left: 6px solid transparent;
        content: '';
    }
    .daterangepicker.opensright:before {
        position: absolute;
        top: -7px;
        left: 9px;
        display: inline-block;
        border-right: 7px solid transparent;
        border-bottom: 7px solid #ccc;
        border-left: 7px solid transparent;
        border-bottom-color: rgba(0, 0, 0, 0.2);
        content: '';
    }
    .daterangepicker.opensright:after {
        position: absolute;
        top: -6px;
        left: 10px;
        display: inline-block;
        border-right: 6px solid transparent;
        border-bottom: 6px solid #fff;
        border-left: 6px solid transparent;
        content: '';
    }
    .daterangepicker.dropup{
        margin-top: -5px;
    }
    .daterangepicker.dropup:before{
        top: initial;
        bottom:-7px;
        border-bottom: initial;
        border-top: 7px solid #ccc;
    }
    .daterangepicker.dropup:after{
        top: initial;
        bottom:-6px;
        border-bottom: initial;
        border-top: 6px solid #fff;
    }
    .daterangepicker.dropdown-menu {
        max-width: none;
        z-index: 3000;
        width: auto;
    }
    .daterangepicker_input {
        display: none !important;
    }
    .daterangepicker .ranges, .daterangepicker .calendar {
        float: left;
    }
    .daterangepicker.single .ranges, .daterangepicker.single .calendar {
        float: none;
    }
    .daterangepicker .ranges {
        margin: 4px;
        text-align: left;
    }
    .daterangepicker .calendar {
        display: none;
        max-width: 270px;
    }
    .daterangepicker.show-calendar .calendar {
        display: block;
    }
    .daterangepicker .calendar.single .calendar-table {
        border: none;
    }

    /* Calendars */
    .daterangepicker .calendar th, .daterangepicker .calendar td {
        white-space: nowrap;
        text-align: center;
        min-width: 32px;
    }
    .daterangepicker .calendar-table {
        border: 1px solid #ddd;
        padding: 4px;
        border-radius: 4px;
        background: #fff;
    }
    .daterangepicker .calendar.left .calendar-table {
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
    }
    .daterangepicker .calendar.right .calendar-table {
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;  
    }
    .daterangepicker .calendar.left {
        margin: 4px 0 4px 4px;
    }
    .daterangepicker .calendar.right {
        margin: 4px 4px 4px 0;
    }
    .daterangepicker .calendar.left .calendar-table {
        padding-right: 12px;
    }
    .daterangepicker table {
        width: 100%;
        margin: 0;
    }
    .daterangepicker td, .daterangepicker th {
        text-align: center;
        width: 20px;
        height: 20px;
        border-radius: 4px;
        white-space: nowrap;
        cursor: pointer;
    }
    .daterangepicker td.off, .daterangepicker td.off.in-range, .daterangepicker td.off.start-date, .daterangepicker td.off.end-date {
        color: #999;
        background: #fff;
    }
    .daterangepicker td.disabled, .daterangepicker option.disabled {
        color: #999;
    }
    .daterangepicker td.available:hover, .daterangepicker th.available:hover {
        background: #eee;
    }
    .daterangepicker td.in-range {
        background: #ebf4f8;
        border-radius: 0;
    }
    .daterangepicker td.start-date {
        border-radius: 4px 0 0 4px;
    }
    .daterangepicker td.end-date {
        border-radius: 0 4px 4px 0;
    }
    .daterangepicker td.start-date.end-date {
        border-radius: 4px;
    }
    .daterangepicker td.active, .daterangepicker td.active:hover {
        background-color: #357ebd;
        border-color: #3071a9;
        color: #fff;
    }
    .daterangepicker td.week, .daterangepicker th.week {
        font-size: 80%;
        color: #ccc;
    }
    .daterangepicker select.monthselect, .daterangepicker select.yearselect {
        font-size: 12px;
        padding: 1px;
        height: auto;
        margin: 0;
        cursor: default;
    }
    .daterangepicker select.monthselect {
        margin-right: 2%;
        width: 56%;
    }
    .daterangepicker select.yearselect {
        width: 40%;
    }
    .daterangepicker select.hourselect, .daterangepicker select.minuteselect, .daterangepicker select.secondselect, .daterangepicker select.ampmselect {
        width: 50px;
        margin-bottom: 0;
    }
    .daterangepicker th.month {
        width: auto;
    }

    /* Text Input Above Each Calendar */
    .daterangepicker .input-mini {
        border: 1px solid #ccc;
        border-radius: 4px;
        color: #555;
        display: block;
        height: 30px;
        line-height: 30px;
        vertical-align: middle;
        margin: 0 0 5px 0;
        padding: 0 6px 0 28px;
        width: 100%;
    }
    .daterangepicker .input-mini.active {
        border: 1px solid #357ebd;
    }
    .daterangepicker .daterangepicker_input i {
        position: absolute;
        left: 8px;
        top: 8px;
    }
    .daterangepicker .left .daterangepicker_input {
        padding-right: 12px;
    }
    .daterangepicker .daterangepicker_input {
        position: relative;
    }

    /* Time Picker */
    .daterangepicker .calendar-time {
        text-align: center;
        margin: 5px auto;
        line-height: 30px;
        position: relative;
        padding-left: 28px;
    }
    .daterangepicker .calendar-time select.disabled {
        color: #ccc;
        cursor: not-allowed;
    }

    /* Predefined Ranges */
    .daterangepicker .ranges {
        font-size: 11px;
    }
    .daterangepicker .ranges ul {
        list-style: none;
        margin: 0;
        padding: 0;
        width: 160px;
    }
    .daterangepicker .ranges li {
        font-size: 13px;
        background: #f5f5f5;
        border: 1px solid #f5f5f5;
        color: #08c;
        padding: 3px 12px;
        margin-bottom: 8px;
        border-radius: 5px;
        cursor: pointer;
    }
    .daterangepicker .ranges li.active, .daterangepicker .ranges li:hover {
        background: #08c;
        border: 1px solid #08c;
        color: #fff;
    }
</style>
<div class="stock_stms c_stock_stms_cnt jobcardreport" ng-controller="JobcardstatementController">
    <div class="report_left_section bg_white">
        <div class="report_filter_header">
            <div class="heading_3">Job card Statements</div>
        </div>
        <div class="report_filter_cnt report_left_menu">
            <div class="overflow_scroll margin-top-05">
                <div class="filter_cnt">
                    <div class="filter filter_click store" id="store">
                        <a class="button repofilterbtn" ng-repeat="division in JobreportData.divisionList" ng-class="{'active':JobreportData.selectedDivisionid == division._id}" 
                           ng-click="filterBydivision(division);" ng-bind="division.name"></a>
                    </div>
                </div>
                
                <div class="filter_cnt">
                    <div class="filter filter_click store" id="store">
                        <a class="button repofilterbtn" ng-class="{'active':JobreportData.immediate_check == true}" ng-click="toogleImmediatejob();">Immediate Job</a>
                    </div>
                </div>
                
                <div class="filter_cnt">
                    <div class="filter filter_click store" id="store">
                        <a class="button repofilterbtn" ng-class="{'active':JobreportData.Orderstatusfilter.length == 0}" 
                           ng-click="filterByorderstat('ALL');">ALL</a>
                        <a class="button repofilterbtn" ng-class="{'active':JobreportData.Orderstatusfilter.indexOf('New Order') !== -1}" 
                           ng-click="filterByorderstat('New Order');">New Order</a>
                        <a class="button repofilterbtn" ng-class="{'active':JobreportData.Orderstatusfilter.indexOf('In Progress') !== -1}" 
                           ng-click="filterByorderstat('In Progress');">In Progress</a>
                        <a class="button repofilterbtn" ng-class="{'active':JobreportData.Orderstatusfilter.indexOf('Completed') !== -1}" 
                           ng-click="filterByorderstat('Completed');">Completed</a>
                        <a class="button repofilterbtn" ng-class="{'active':JobreportData.Orderstatusfilter.indexOf('Invoice and Delivery') !== -1}" 
                           ng-click="filterByorderstat('Invoice and Delivery');">Invoice and Delivery</a>
                    </div>
                </div>                
                
                <div class="filter_cnt">
                    <div class="filter filter_click store" id="store">
                        <a class="button repofilterbtn" ng-class="{'active':JobreportData.Processstatusfilter.length === 0}" 
                           ng-click="filterByprocess('ALL');">ALL</a>
                        <a class="button repofilterbtn" ng-repeat="process in JobreportData.processList" ng-class="{'active':JobreportData.Processstatusfilter.indexOf(process._id) !== -1}" 
                           ng-click="filterByprocess(process._id);" ng-bind="process.process_name"></a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="report_right_section">
        <div class="report_responsive_cnt">
            <div class="report_right_section_header">Job card Statements for <b ng-if="JobreportData.selectedDivisionname == 'ALL'">ALL</b>
                <b ng-if="JobreportData.selectedDivisionname != 'ALL'" ng-bind="JobreportData.selectedDivisionname"></b>.

                <div class="fullscreen_icon pull-right margin-right-10 c_full_screen_click" id="full_screen" onclick="return full_screen_pendingpayment()"></div>

                <div class="mail_icons pull-right margin-right-10" ng-click="clientdata.showdialogDiv = !clientdata.showdialogDiv"></div>

                <div class="excel_icons pull-right margin-right-10" ng-click="exportThisReport();"></div>

                <!--<div class="print_icons pull-right margin-right-10" ng-click="printThisReport();"></div>-->
            </div>

            <div class="report_container overflow_scroll">
                <div class="report_set_container">
                    <div class="purchase_fixed_postion dtrange_fixed_postion">
                        <div class="purchase_date_select">
                            <div class="purchase_date_left_sec">
                                <div class="custom_date_style">
                                    <div class="input-append">
                                        <input class="form-control add-on purchase_date_input rangeDate" name="daterange" type="text" />
                                        <span class="add-on date_icon rangeDate"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="purchase_date_right_sec">
                                <span ng-class="{'active':JobreportData.activeDay == 'TODAY'}" ng-click="filterOrderstatement('TODAY');">Today</span>,
                                <span ng-class="{'active':JobreportData.activeDay == 'YDAY'}" ng-click="filterOrderstatement('YDAY');">Yesterday</span>,
                                <span ng-class="{'active':JobreportData.activeDay == '7DAY'}" ng-click="filterOrderstatement('7DAY');">Last 7 Days</span>,  
                                <span ng-class="{'active':JobreportData.activeDay == 'THIS_MONTH'}" ng-click="filterOrderstatement('THIS_MONTH');">This Month</span>, 
                                <span ng-class="{'active':JobreportData.activeDay == 'LAST_MONTH'}" ng-click="filterOrderstatement('LAST_MONTH');">LastMonth</span>
                            </div>
                        </div>
                        <div class="report_date_show"></div>
                    </div>
                    <div class="clearboth"></div>

                    <div class="heading_5 col-xs-12 reportsearch margin-top-30 margin-bottom-15">
                        <b class="pull-left margin-top-10" style="font-size: 15px;" ng-if="(JobreportData.FromDate | date:dateformats.short_date) == (JobreportData.ToDate | date:dateformats.short_date)" 
                           ng-bind-html="'Job card Statement for '+JobreportData.FromDate | date:dateformats.short_date"></b>
                        <b class="pull-left margin-top-10" style="font-size: 15px;" ng-if="(JobreportData.FromDate | date:dateformats.short_date) != (JobreportData.ToDate | date:dateformats.short_date)" 
                           ng-bind-html="'Job card Statement from '+(JobreportData.FromDate | date:dateformats.short_date)+' to '+(JobreportData.ToDate | date:dateformats.short_date)"></b>
                        <!--<div class="print_icons pull-left margin-right-10 margin-top-10" ng-click="printThisReport();"></div>-->
                        <div class="excel_icons pull-left margin-right-10 margin-top-10" ng-click="exportThisReport();"></div>
                        <div class="right_menu" style="margin-top: 0px;float:right; width:330px;">
                            <div class="search_right_cnt" style="width:100% !important;">
                                <input type="text" class="search_box_expand" ng-model="JobreportData.searchtext" ng-enter="searchJobstatement()" placeholder="Search for Customer, Mobile No ">
                                <div class="search_icons" ng-click="searchJobstatement()">
                                    <span class="search_letter">Search</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xs-12 reporttablez margin-top-15">
                        <table class="mt_table tb_scroll_style responsive-table-scroll">
                            <thead>
                                <tr>
                                    <th style="min-width: 130px;">Division</th>
                                    <th style="min-width: 130px;">Job No</th>
                                    <th style="min-width: 85px;">Job Date</th>
                                    <th style="min-width: 250px;">Customer Name</th>
                                    <th style="min-width: 80px;">Priority</th>
                                    <th style="min-width: 125px;">Status</th>
                                    <th style="min-width: 110px;">Job Ref.no</th>
                                    <th style="min-width: 115px;">Customer DC No</th>
                                    <th style="min-width: 125px;">Customer DC Date</th>
                                    <th style="min-width: 130px;">Fabric</th>
                                    <th style="min-width: 200px;">Process</th>
                                    <th style="min-width: 110px;">Colour</th>
                                    <th class="text-center" style="min-width: 50px;">Dia</th>
                                    <th style="min-width: 90px;">Lot No</th>
                                    <th class="text-center" style="min-width: 80px;">No of Rolls</th>
                                    <th class="text-right" style="min-width: 95px;">Weight</th>
                                </tr>
                            </thead>
                            <tbody class="scollbody">
                                <tr ng-repeat-start="orders in JobreportData.orderList | filter:JobreportData.searchtext"></tr>
                                <tr ng-repeat="inwards in orders.inwards[0].inward_data">
                                    <td style="min-width: 130px;"><span ng-if="$index==0" ng-bind="orders.division_id.name"></span></td>
                                    <td style="min-width: 130px;"><b ng-if="$index==0" ng-bind="orders.order_no"></b></td>
                                    <td style="min-width: 85px;"><span ng-if="$index==0" ng-bind="orders.order_date | date:dateformats.short_date"></span></td>
                                    <td style="min-width: 250px;"><b ng-if="$index==0" ng-bind="orders.customer_name"></b></td>
                                    <td style="min-width: 80px;"><b ng-if="$index==0 && orders.immediate_job">Immediate</b><b ng-if="$index==0 && !orders.immediate_job">Normal</b></td>
                                    <td style="min-width: 125px;"><span ng-if="$index==0" ng-bind="orders.order_status"></span></td>
                                    <td style="min-width: 110px;"><span ng-if="$index==0" ng-bind="orders.order_reference_no"></span></td>
                                    <td style="min-width: 115px;"><span ng-if="$index==0" ng-bind="orders.customer_dc_no"></span></td>
                                    <td style="min-width: 125px;"><span ng-if="$index==0" ng-bind="orders.customer_dc_date | date:dateformats.short_date"></span></td>
                                    <td style="min-width: 130px;" ng-bind="inwards.fabric_type"></td>
                                    <td style="min-width: 200px;"><span ng-repeat="process in inwards.process" ng-bind-html="process.process_name+'<br/>'"></span></td>
                                    <td style="min-width: 110px;" ng-bind="inwards.fabric_color"></td>
                                    <td style="min-width: 50px;" class="text-center" ng-bind="inwards.dia"></td>
                                    <td style="min-width: 90px;" ng-bind="inwards.lot_no"></td>
                                    <td class="text-center" style="min-width: 80px;" ng-bind="inwards.rolls"></td>
                                    <td class="text-right" style="min-width: 95px;" ng-bind="inwards.weight | number:3"></td>
                                </tr>
                                <tr>
                                    <td style="min-width: 130px;"></td>
                                    <td style="min-width: 130px;"></td>
                                    <td style="min-width: 85px;"></td>
                                    <td style="min-width: 250px;"></td>
                                    <td style="min-width: 80px;"></td>
                                    <td style="min-width: 125px;"></td>
                                    <td style="min-width: 110px;"></td>
                                    <td style="min-width: 115px;"></td>
                                    <td style="min-width: 125px;"></td>
                                    <td style="min-width: 130px;"></td>
                                    <td style="min-width: 200px;"></td>
                                    <td style="min-width: 110px;"></td>
                                    <td style="min-width: 50px;"></td>
                                    <td style="min-width: 90px;"><b>Order Wise Total</b></td>
                                    <td style="min-width: 80px;"></td>
                                    <td class="text-right" style="min-width: 95px;" ng-bind="orders.inwards[0].inward_data | sumByKey:'weight' | number:3"></td>
                                </tr>
                                <tr ng-repeat-end></tr>
                                <tr>
                                    <td style="min-width: 130px;"></td>
                                    <td style="min-width: 130px;"></td>
                                    <td style="min-width: 85px;"></td>
                                    <td style="min-width: 250px;"></td>
                                    <td style="min-width: 80px;"></td>
                                    <td style="min-width: 125px;"></td>
                                    <td style="min-width: 110px;"></td>
                                    <td style="min-width: 115px;"></td>
                                    <td style="min-width: 125px;"></td>
                                    <td style="min-width: 130px;"></td>
                                    <td style="min-width: 200px;"></td>
                                    <td style="min-width: 110px;"></td>
                                    <td style="min-width: 50px;"></td>
                                    <td style="min-width: 90px;"><b>Net Total</b></td>
                                    <td style="min-width: 80px;"></td>
                                    <td class="text-right" style="min-width: 95px;">
                                        <b ng-bind="JobreportData.orderList | ordersumByKey:'weight'"></b>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>    
    var $table = $('table.mt_table'),
            $bodyCells = $table.find('tbody tr:first').children(),
            colWidth;
    
    function pendingpayreport() {
        colWidth = $bodyCells.map(function () {
        return $(this).width();
        }).get();
        $table.find('thead tr').children().each(function (i, v) {
        $(v).width(colWidth[i]);
        });
        var header_height_c1 = $('.header').height(); //window height
        var windowHeight_c1 = $(window).height();
        var total_height_c1 = windowHeight_c1 - header_height_c1 - 75;
        var r1 = $('.report_date_select').height() + 20;
        var r2 = $('.reportheader').height() + 50;
        var r3 = $('.reportsearch').height() + 25;
        var r4 = $(".reporttablez .mt_table thead").height() + 45;
        var totalr1 = r1 + r2 + r3 + r4;
        $('.report_right_section .overflow_scroll').css('height', total_height_c1);
        if (parseInt($(window).width()) <= 840) {
            if (!$('.report_right_section').hasClass('full_width_acc')) {
                totalr1 += 420;
            }
            $('.scollbody').css('height', total_height_c1 - totalr1);
        } else {
            $('.scollbody').css('height', total_height_c1 - totalr1);
        }
    }
    
    // Adjust the width of thead cells when window resizes
    $(window).resize(function () {
        pendingpayreport();
        if($(window).width() <= 840){
            reportsFullviewshow();
        }
    });
    
    if($(window).width() <= 840){
        reportsFullviewshow();
    }
    
    function full_screen_pendingpayment() {
        $('.report_left_section').toggle();
        $('.report_right_section').toggleClass('full_width_acc');
        pendingpayreport();
    }
    
    setTimeout(function () {
        $('.report_left_section').toggle();
        $('.report_right_section').toggleClass('full_width_acc');
        pendingpayreport();
    }, 200);
</script>